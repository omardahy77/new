data:application/octet-stream;base64,aW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJzsKaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnOwoKZG90ZW52LmNvbmZpZygpOwoKY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5WSVRFX1NVUEFCQVNFX1VSTDsKY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuVklURV9TVVBBQkFTRV9BTk9OX0tFWTsKCmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkgewogIGNvbnNvbGUuZXJyb3IoJ+KdjCBNaXNzaW5nIFN1cGFiYXNlIFVSTCBvciBLZXkgaW4gLmVudicpOwogIHByb2Nlc3MuZXhpdCgxKTsKfQoKY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7Cgphc3luYyBmdW5jdGlvbiB2ZXJpZnlSZWJ1aWxkVjIoKSB7CiAgY29uc29sZS5sb2coJ1xu8J+Pl++4jyAgVkVSSUZZSU5HIFJFQlVJTEQgVjIgKERFUEVOREVOQ1kgRklYKScpOwogIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpOwoKICBsZXQgYWxsR29vZCA9IHRydWU7CgogIC8vIDEuIENoZWNrIGlmIFRhYmxlcyBFeGlzdCAoU2ltcGxlIFJlYWQpCiAgY29uc3QgdGFibGVzID0gWydwcm9maWxlcycsICdjb3Vyc2VzJywgJ3NpdGVfc2V0dGluZ3MnXTsKICBmb3IgKGNvbnN0IHRhYmxlIG9mIHRhYmxlcykgewogICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKHRhYmxlKS5zZWxlY3QoJ2NvdW50JykubGltaXQoMSkuc2luZ2xlKCk7CiAgICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhg4p2MIFRhYmxlICcke3RhYmxlfScgY2hlY2sgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICAgICAgICBhbGxHb29kID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFRhYmxlICcke3RhYmxlfScgZXhpc3RzLmApOwogICAgICB9CiAgfQoKICAvLyAyLiBDaGVjayBBZG1pbiBQcm9maWxlCiAgY29uc3QgZW1haWwgPSAnYWRtaW5Ac25pcGVyZnguY29tJzsKICBjb25zdCB7IGRhdGE6IHByb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2ZpbGVzJykuc2VsZWN0KCcqJykuZXEoJ2VtYWlsJywgZW1haWwpLnNpbmdsZSgpOwogIAogIGlmIChwcm9maWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKGDinIUgQWRtaW4gUHJvZmlsZSBGb3VuZDogJHtwcm9maWxlLnJvbGV9YCk7CiAgICAgIGlmIChwcm9maWxlLnJvbGUgIT09ICdhZG1pbicpIHsKICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEFkbWluIHJvbGUgaXMgaW5jb3JyZWN0IChTaG91bGQgYmUgYWRtaW4pLicpOwogICAgICAgICAgYWxsR29vZCA9IGZhbHNlOwogICAgICB9CiAgfSBlbHNlIHsKICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gQWRtaW4gcHJvZmlsZSBub3QgZm91bmQgKFdpbGwgYmUgY3JlYXRlZCBvbiBsb2dpbikuJyk7CiAgfQoKICAvLyAzLiBDaGVjayBTZXR0aW5ncwogIGNvbnN0IHsgZGF0YTogc2V0dGluZ3MgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3NpdGVfc2V0dGluZ3MnKS5zZWxlY3QoJyonKS5saW1pdCgxKS5zaW5nbGUoKTsKICBpZiAoc2V0dGluZ3MpIHsKICAgICAgY29uc29sZS5sb2coJ+KchSBTaXRlIFNldHRpbmdzIEluaXRpYWxpemVkLicpOwogIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCfinYwgU2l0ZSBTZXR0aW5ncyBNaXNzaW5nLicpOwogICAgICBhbGxHb29kID0gZmFsc2U7CiAgfQoKICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTsKICBpZiAoYWxsR29vZCkgewogICAgICBjb25zb2xlLmxvZygn8J+OiSBTVUNDRVNTOiBSZWJ1aWxkIFYyIENvbXBsZXRlIScpOwogICAgICBjb25zb2xlLmxvZygnICAgVGhlICJjYW5ub3QgZHJvcCBmdW5jdGlvbiIgZXJyb3Igc2hvdWxkIGJlIHJlc29sdmVkLicpOwogICAgICBjb25zb2xlLmxvZygnICAgWW91IGNhbiBub3cgbG9nIGluIGF0IC9sb2dpbicpOwogIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gUkVCVUlMRCBDT01QTEVURUQgV0lUSCBXQVJOSU5HUy4nKTsKICB9CiAgY29uc29sZS5sb2coJ1xuJyk7Cn0KCnZlcmlmeVJlYnVpbGRWMigpOwo=
