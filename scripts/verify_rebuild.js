data:application/octet-stream;base64,aW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJzsKaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnOwoKZG90ZW52LmNvbmZpZygpOwoKY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5WSVRFX1NVUEFCQVNFX1VSTDsKY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuVklURV9TVVBBQkFTRV9BTk9OX0tFWTsKCmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkgewogIGNvbnNvbGUuZXJyb3IoJ+KdjCBNaXNzaW5nIFN1cGFiYXNlIFVSTCBvciBLZXkgaW4gLmVudicpOwogIHByb2Nlc3MuZXhpdCgxKTsKfQoKY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7Cgphc3luYyBmdW5jdGlvbiB2ZXJpZnlSZWJ1aWxkKCkgewogIGNvbnNvbGUubG9nKCdcbvCfj5fvuI8gIFZFUklGWUlORyBEQVRBQkFTRSBSRUJVSUxEJyk7CiAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7CgogIC8vIDEuIENoZWNrIFRhYmxlcwogIGNvbnN0IHRhYmxlcyA9IFsncHJvZmlsZXMnLCAnY291cnNlcycsICdsZXNzb25zJywgJ3NpdGVfc2V0dGluZ3MnLCAnZW5yb2xsbWVudHMnXTsKICBsZXQgdGFibGVzT2sgPSB0cnVlOwogIAogIGZvciAoY29uc3QgdGFibGUgb2YgdGFibGVzKSB7CiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20odGFibGUpLnNlbGVjdCgnY291bnQnKS5saW1pdCgxKS5zaW5nbGUoKTsKICAgICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGDinYwgVGFibGUgY2hlY2sgZmFpbGVkOiAke3RhYmxlfSAoJHtlcnJvci5tZXNzYWdlfSlgKTsKICAgICAgICAgIHRhYmxlc09rID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFRhYmxlIGV4aXN0czogJHt0YWJsZX1gKTsKICAgICAgfQogIH0KCiAgaWYgKCF0YWJsZXNPaykgewogICAgICBjb25zb2xlLmVycm9yKCfwn5uRIFJlYnVpbGQgdmVyaWZpY2F0aW9uIGZhaWxlZC4gU29tZSB0YWJsZXMgYXJlIG1pc3NpbmcuJyk7CiAgICAgIHJldHVybjsKICB9CgogIC8vIDIuIENoZWNrIEFkbWluIExvZ2luCiAgY29uc3QgZW1haWwgPSAnYWRtaW5Ac25pcGVyZnguY29tJzsKICBjb25zdCBwYXNzd29yZCA9ICdIYW16YTAxMDBAJzsKCiAgY29uc29sZS5sb2coYFxu8J+RiSBUZXN0aW5nIEFkbWluIExvZ2luIGZvcjogJHtlbWFpbH1gKTsKICAKICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhQYXNzd29yZCh7CiAgICBlbWFpbCwKICAgIHBhc3N3b3JkCiAgfSk7CgogIGlmIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZygn4p2MIExvZ2luIEZhaWxlZDonLCBlcnJvci5tZXNzYWdlKTsKICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygn4pyFIExvZ2luIFN1Y2Nlc3NmdWwnKTsKICAgICAgCiAgICAgIC8vIDMuIENoZWNrIEFkbWluIFByb2ZpbGUKICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9maWxlcycpLnNlbGVjdCgnKicpLmVxKCdpZCcsIGRhdGEudXNlci5pZCkuc2luZ2xlKCk7CiAgICAgIAogICAgICBpZiAocHJvZmlsZSkgewogICAgICAgICAgY29uc29sZS5sb2coYCAgIFJvbGU6ICR7cHJvZmlsZS5yb2xlfWApOwogICAgICAgICAgaWYgKHByb2ZpbGUucm9sZSA9PT0gJ2FkbWluJykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcbvCfjokgU1VDQ0VTUzogU3lzdGVtIGlzIENsZWFuLCBTdGFibGUsIGFuZCBSZWFkeSEnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gVXNlciBsb2dnZWQgaW4gYnV0IHJvbGUgaXMgbm90IGFkbWluLiAoVHJpZ2dlciBtaWdodCBuZWVkIGNoZWNrKScpOwogICAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBQcm9maWxlIG1pc3NpbmcgKFNlbGYtaGVhbGluZyBzaG91bGQgZml4IHRoaXMgb24gZnJvbnRlbmQpJyk7CiAgICAgIH0KICB9CiAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4nKTsKfQoKdmVyaWZ5UmVidWlsZCgpOwo=
